def get_xpath(driver, element):
    components = []
    current = element

    while current is not None:
        parent = driver.execute_script("return arguments[0].parentNode;", current)
        if parent is None:
            break

        parent_tag_name = driver.execute_script("return arguments[0].tagName;", parent)
        if parent_tag_name is None:
            break

        siblings = driver.execute_script("return Array.prototype.filter.call(arguments[0].children, child => child.tagName.toLowerCase() === arguments[1]);", parent, current.tag_name)
        index = ""

        if len(siblings) > 1:
            index = siblings.index(current) + 1
            index = f'[{index}]'

        components.insert(0, f'{current.tag_name}{index}')
        current = parent if parent_tag_name.lower() != 'html' else None

    return '/html/' + '/'.join(components)
